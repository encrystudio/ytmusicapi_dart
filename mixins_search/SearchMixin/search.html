<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the search method from the SearchMixin mixin, for the Dart programming language.">
  <title>search method - SearchMixin mixin - search library - Dart API</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="../../static-assets/github.css?v1">
  <link rel="stylesheet" href="../../static-assets/styles.css?v1">
  <link rel="icon" href="../../static-assets/favicon.png?v1">
  
</head>

<body data-base-href="../../" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">ytmusicapi_dart</a></li>
    <li><a href="../../mixins_search/">mixins&#47;search.dart</a></li>
    <li><a href="../../mixins_search/SearchMixin-mixin.html">SearchMixin</a></li>
    <li class="self-crumb">search method</li>
  </ol>
  <div class="self-name">search</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <button class="toggle" id="theme-button" title="Toggle between light and dark mode" aria-label="Light and dark mode toggle">
    <span id="dark-theme-button" class="material-symbols-outlined" aria-hidden="true">
      dark_mode
    </span>
    <span id="light-theme-button" class="material-symbols-outlined" aria-hidden="true">
      light_mode
    </span>
  </button>
</header>
<main>
<div
    id="dartdoc-main-content"
    class="main-content"
    data-above-sidebar="mixins_search&#47;SearchMixin-mixin-sidebar.html"
    data-below-sidebar="">
    <div>
<h1><span class="kind-method">search</span> method 
</h1></div>

    <section class="multi-line-signature">
      
<span class="returntype"><a href="https://api.dart.dev/stable/3.9.4/dart-core/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.dart.dev/stable/3.9.4/dart-core/List-class.html">List</a></span>&gt;</span></span>
<span class="name ">search</span>(<wbr><ol class="parameter-list"> <li><span class="parameter" id="search-param-query"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.4/dart-core/String-class.html">String</a></span> <span class="parameter-name">query</span>, {</span></li>
<li><span class="parameter" id="search-param-filter"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.4/dart-core/String-class.html">String</a>?</span> <span class="parameter-name">filter</span>, </span></li>
<li><span class="parameter" id="search-param-scope"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.4/dart-core/String-class.html">String</a>?</span> <span class="parameter-name">scope</span>, </span></li>
<li><span class="parameter" id="search-param-limit"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.4/dart-core/int-class.html">int</a></span> <span class="parameter-name">limit</span> = <span class="default-value">20</span>, </span></li>
<li><span class="parameter" id="search-param-ignoreSpelling"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.4/dart-core/bool-class.html">bool</a></span> <span class="parameter-name">ignoreSpelling</span> = <span class="default-value">false</span>, </span></li>
</ol>})

      

    </section>
    
<section class="desc markdown">
  <p>Search YouTube music.</p>
<p>Returns results within the provided category.</p>
<ul>
<li><code>query</code> Query string, i.e. 'Oasis Wonderwall'.</li>
<li><code>filter</code> Filter for item types.
         Allowed values: <code>songs</code>, <code>videos</code>, <code>albums</code>, <code>artists</code>, <code>playlists</code>,
         <code>community_playlists</code>, <code>featured_playlists</code>, <code>uploads</code>.
         (Default: Default search, including all types of items).</li>
<li><code>scope</code> Search scope. Allowed values: <code>library</code>, <code>uploads</code>.
        (Default: Search the public YouTube Music catalogue).
        Changing scope from the default will reduce the number of settable filters.
        Setting a filter that is not permitted will throw an exception.
        For <code>uploads</code>, no filter can be set.
        For <code>library</code>, <code>community_playlists</code> and <code>featured_playlists</code> filter cannot be set.</li>
<li><code>limit</code> Number of search results to return. (Default: <code>20</code>).</li>
<li><code>ignoreSpelling</code> Whether to ignore YTM spelling suggestions.
                 If <code>true</code>, the exact search term will be searched for,
                 and will not be corrected.
                 This does not have any effect when the filter is set to <code>uploads</code>.
                 (Default: <code>false</code>, will use YTM's default behavior of autocorrecting the search.</li>
</ul>
<p>Returns List of results depending on filter.</p>
<ul>
<li><code>resultType</code> specifies the type of item (important for default search).
Albums, artists and playlists additionally contain a <code>browseId</code>, corresponding to
<code>albumId</code>, <code>channelId</code> and <code>playlistId</code> (<code>browseId</code>=<code>VL</code>+<code>playlistId</code>).</li>
</ul>
<p>Example list for default search with one result per <code>resultType</code> for brevity.
Normally there are 3 results per <code>resultType</code> and an additional <code>thumbnails</code> key:</p>
<pre class="language-json"><code class="language-json">[
  {
    "category": "Top result",
    "resultType": "video",
    "videoId": "vU05Eksc_iM",
    "title": "Wonderwall",
    "artists": [
      {
        "name": "Oasis",
        "id": "UCmMUZbaYdNH0bEd1PAlAqsA"
      }
    ],
    "views": "1.4M",
    "videoType": "MUSIC_VIDEO_TYPE_OMV",
    "duration": "4:38",
    "duration_seconds": 278
  },
  {
    "category": "Songs",
    "resultType": "song",
    "videoId": "ZrOKjDZOtkA",
    "title": "Wonderwall",
    "artists": [
      {
        "name": "Oasis",
        "id": "UCmMUZbaYdNH0bEd1PAlAqsA"
      }
    ],
    "album": {
      "name": "(What's The Story) Morning Glory? (Remastered)",
      "id": "MPREb_9nqEki4ZDpp"
    },
    "duration": "4:19",
    "duration_seconds": 259,
    "isExplicit": false,
    "feedbackTokens": {
      "add": null,
      "remove": null
    }
  },
  {
    "category": "Albums",
    "resultType": "album",
    "browseId": "MPREb_IInSY5QXXrW",
    "playlistId": "OLAK5uy_kunInnOpcKECWIBQGB0Qj6ZjquxDvfckg",
    "title": "(What's The Story) Morning Glory?",
    "type": "Album",
    "artist": "Oasis",
    "year": "1995",
    "isExplicit": false
  },
  {
    "category": "Community playlists",
    "resultType": "playlist",
    "browseId": "VLPLK1PkWQlWtnNfovRdGWpKffO1Wdi2kvDx",
    "title": "Wonderwall - Oasis",
    "author": "Tate Henderson",
    "itemCount": "174"
  },
  {
    "category": "Videos",
    "resultType": "video",
    "videoId": "bx1Bh8ZvH84",
    "title": "Wonderwall",
    "artists": [
      {
        "name": "Oasis",
        "id": "UCmMUZbaYdNH0bEd1PAlAqsA"
      }
    ],
    "views": "386M",
    "duration": "4:38",
    "duration_seconds": 278
  },
  {
    "category": "Artists",
    "resultType": "artist",
    "browseId": "UCmMUZbaYdNH0bEd1PAlAqsA",
    "artist": "Oasis",
    "shuffleId": "RDAOkjHYJjL1a3xspEyVkhHAsg",
    "radioId": "RDEMkjHYJjL1a3xspEyVkhHAsg"
  },
  {
    "category": "Profiles",
    "resultType": "profile",
    "title": "Taylor Swift Time",
    "name": "@TaylorSwiftTime",
    "browseId": "UCSCRK7XlVQ6fBdEl00kX6pQ",
    "thumbnails": ...
  }
]
</code></pre>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">Future&lt;List&gt; search(
  String query, {
  String? filter,
  String? scope,
  int limit = 20,
  bool ignoreSpelling = false,
}) async {
  final body = &lt;String, dynamic&gt;{&#39;query&#39;: query};
  const endpoint = &#39;search&#39;;
  final searchResults = &lt;dynamic&gt;[];

  const filters = [
    &#39;albums&#39;,
    &#39;artists&#39;,
    &#39;playlists&#39;,
    &#39;community_playlists&#39;,
    &#39;featured_playlists&#39;,
    &#39;songs&#39;,
    &#39;videos&#39;,
    &#39;profiles&#39;,
    &#39;podcasts&#39;,
    &#39;episodes&#39;,
  ];
  if (filter != null &amp;&amp; !filters.contains(filter)) {
    throw YTMusicUserError(
      &#39;Invalid filter provided. Please use one of the following filters or leave out the parameter: &#39;
      &#39;${filters.join(&#39;, &#39;)}&#39;,
    );
  }

  const scopes = [&#39;library&#39;, &#39;uploads&#39;];
  if (scope != null &amp;&amp; !scopes.contains(scope)) {
    throw YTMusicUserError(
      &#39;Invalid scope provided. Please use one of the following scopes or leave out the parameter: &#39;
      &#39;${scopes.join(&#39;, &#39;)}&#39;,
    );
  }

  if (scope == &#39;uploads&#39; &amp;&amp; filter != null) {
    throw YTMusicUserError(
      &#39;No filter can be set when searching uploads. Please unset the filter parameter when scope is set to uploads.&#39;,
    );
  }

  if (scope == &#39;library&#39; &amp;&amp;
      filter != null &amp;&amp;
      [&#39;community_playlists&#39;, &#39;featured_playlists&#39;].contains(filter)) {
    throw YTMusicUserError(
      &#39;$filter cannot be set when searching library. Please use one of the following filters or leave out the parameter: &#39;
      &#39;${filters.sublist(0, 3).followedBy(filters.sublist(5)).join(&#39;, &#39;)}&#39;,
    );
  }

  final params = getSearchParams(filter, scope, ignoreSpelling);
  if (params != null) {
    body[&#39;params&#39;] = params;
  }

  final response = await sendRequest(endpoint, body);

  &#47;&#47; no results
  if (!response.containsKey(&#39;contents&#39;)) return searchResults;

  dynamic results;
  if ((response[&#39;contents&#39;] as JsonMap).containsKey(
    &#39;tabbedSearchResultsRenderer&#39;,
  )) {
    final tabIndex =
        (scope == null || filter == null) ? 0 : scopes.indexOf(scope) + 1;
    results =
        (((((response[&#39;contents&#39;] as JsonMap)[&#39;tabbedSearchResultsRenderer&#39;]
                        as JsonMap)[&#39;tabs&#39;]
                    as List)[tabIndex]
                as JsonMap)[&#39;tabRenderer&#39;]
            as JsonMap)[&#39;content&#39;];
  } else {
    results = response[&#39;contents&#39;];
  }

  final sectionList = List&lt;JsonMap&gt;.from(nav(results, SECTION_LIST) as List);

  &#47;&#47; no results
  if (sectionList.length == 1 &amp;&amp;
      sectionList.first.containsKey(&#39;itemSectionRenderer&#39;)) {
    return searchResults;
  }

  &#47;&#47; set filter for parser
  String? resultType;
  final String? realFilter;
  if (filter != null &amp;&amp; filter.contains(&#39;playlists&#39;)) {
    realFilter = &#39;playlists&#39;;
  } else if (scope == &#39;uploads&#39;) {
    realFilter = &#39;uploads&#39;;
    resultType = &#39;upload&#39;;
  } else {
    realFilter = filter;
  }

  for (final res in sectionList) {
    String? category;
    List&lt;JsonMap&gt; shelfContents;

    if (res.containsKey(&#39;musicCardShelfRenderer&#39;)) {
      final topResult = parseTopResult(
        res[&#39;musicCardShelfRenderer&#39;] as JsonMap,
        parser.getSearchResultTypes(),
      );
      searchResults.add(topResult);

      shelfContents = List&lt;JsonMap&gt;.from(
        (nav(res, [
                  &#39;musicCardShelfRenderer&#39;,
                  &#39;contents&#39;,
                ], nullIfAbsent: true) ??
                [])
            as List,
      );
      if (shelfContents.isEmpty) continue;

      &#47;&#47; if &quot;more from youtube&quot; is present, remove it - it&#39;s not parseable
      if (shelfContents.first.containsKey(&#39;messageRenderer&#39;)) {
        category =
            nav(shelfContents.removeAt(0), [
                  &#39;messageRenderer&#39;,
                  ...TEXT_RUN_TEXT,
                ])
                as String?;
      }
    } else if (res.containsKey(&#39;musicShelfRenderer&#39;)) {
      shelfContents = List&lt;JsonMap&gt;.from(
        (res[&#39;musicShelfRenderer&#39;] as JsonMap)[&#39;contents&#39;] as List,
      );
      category =
          nav(res, MUSIC_SHELF + TITLE_TEXT, nullIfAbsent: true) as String?;

      &#47;&#47; if we know the filter it&#39;s easy to set the result type
      &#47;&#47; unfortunately uploads is modeled as a filter (historical reasons),
      &#47;&#47; so we take care to not set the result type for that scope
      if (realFilter != null &amp;&amp; scope != &#39;uploads&#39;) {
        resultType =
            realFilter.substring(0, realFilter.length - 1).toLowerCase();
      }
    } else {
      continue;
    }

    searchResults.addAll(
      parseSearchResults(
        shelfContents,
        resultType: resultType,
        category: category,
      ),
    );

    if (realFilter != null) {
      &#47;&#47; if filter is set, there are continuations
      Future&lt;JsonMap&gt; requestFunc(dynamic additionalParams) =&gt; sendRequest(
        endpoint,
        body,
        additionalParams: additionalParams as String,
      );
      List parseFunc(contents) =&gt; parseSearchResults(
        List&lt;JsonMap&gt;.from(contents as List),
        resultType: resultType,
        category: category,
      );

      searchResults.addAll(
        await getContinuations(
          res[&#39;musicShelfRenderer&#39;] as JsonMap,
          &#39;musicShelfContinuation&#39;,
          limit - searchResults.length,
          requestFunc,
          parseFunc,
        ),
      );
    }
  }

  return searchResults;
}</code></pre>
</section>


  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="../../index.html">ytmusicapi_dart</a></li>
    <li><a href="../../mixins_search/">search</a></li>
    <li><a href="../../mixins_search/SearchMixin-mixin.html">SearchMixin</a></li>
    <li class="self-crumb">search method</li>
</ol>

    <h5>SearchMixin mixin</h5>
    <div id="dartdoc-sidebar-left-content"></div>
  </div><!--/.sidebar-offcanvas-->
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
</div><!--/.sidebar-offcanvas-->
</main>
<footer>
  <span class="no-break">
    ytmusicapi_dart
      2.0.0
  </span>
  
</footer>


<script src="../../static-assets/highlight.pack.js?v1"></script>
<script src="../../static-assets/docs.dart.js"></script>

</body>
</html>

