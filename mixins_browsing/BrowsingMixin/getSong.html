<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the getSong method from the BrowsingMixin mixin, for the Dart programming language.">
  <title>getSong method - BrowsingMixin mixin - browsing library - Dart API</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="../../static-assets/github.css?v1">
  <link rel="stylesheet" href="../../static-assets/styles.css?v1">
  <link rel="icon" href="../../static-assets/favicon.png?v1">
  
</head>

<body data-base-href="../../" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">ytmusicapi_dart</a></li>
    <li><a href="../../mixins_browsing/">mixins&#47;browsing.dart</a></li>
    <li><a href="../../mixins_browsing/BrowsingMixin-mixin.html">BrowsingMixin</a></li>
    <li class="self-crumb">getSong method</li>
  </ol>
  <div class="self-name">getSong</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <button class="toggle" id="theme-button" title="Toggle between light and dark mode" aria-label="Light and dark mode toggle">
    <span id="dark-theme-button" class="material-symbols-outlined" aria-hidden="true">
      dark_mode
    </span>
    <span id="light-theme-button" class="material-symbols-outlined" aria-hidden="true">
      light_mode
    </span>
  </button>
</header>
<main>
<div
    id="dartdoc-main-content"
    class="main-content"
    data-above-sidebar="mixins_browsing&#47;BrowsingMixin-mixin-sidebar.html"
    data-below-sidebar="">
    <div>
<h1><span class="kind-method">getSong</span> method 
</h1></div>

    <section class="multi-line-signature">
      
<span class="returntype"><a href="https://api.dart.dev/stable/3.9.4/dart-core/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="../../type_alias/JsonMap.html">JsonMap</a></span>&gt;</span></span>
<span class="name ">getSong</span>(<wbr><ol class="parameter-list"> <li><span class="parameter" id="getSong-param-videoId"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.4/dart-core/String-class.html">String</a></span> <span class="parameter-name">videoId</span>, {</span></li>
<li><span class="parameter" id="getSong-param-signatureTimestamp"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.4/dart-core/int-class.html">int</a>?</span> <span class="parameter-name">signatureTimestamp</span>, </span></li>
</ol>})

      

    </section>
    
<section class="desc markdown">
  <p>Returns metadata and streaming information about a song or video.</p>
<ul>
<li><code>videoId</code> Video id.</li>
<li><code>signatureTimestamp</code> Provide the current YouTube <code>signatureTimestamp</code>.
  If not provided, a default value will be used, which might result in invalid streaming URLs.</li>
</ul>
<p>Returns Map with song metadata.</p>
<p>Example:</p>
<pre class="language-json"><code class="language-json">{
  "playabilityStatus": {
    "status": "OK",
    "playableInEmbed": true,
    "audioOnlyPlayability": {
      "audioOnlyPlayabilityRenderer": {
        "trackingParams": "CAEQx2kiEwiuv9X5i5H1AhWBvlUKHRoZAHk=",
        "audioOnlyAvailability": "FEATURE_AVAILABILITY_ALLOWED"
      }
    },
    "miniplayer": {
      "miniplayerRenderer": {
        "playbackMode": "PLAYBACK_MODE_ALLOW"
      }
    },
    "contextParams": "Q0FBU0FnZ0M="
  },
  "streamingData": {
    "expiresInSeconds": "21540",
    "adaptiveFormats": [
      {
        "itag": 140,
        "url": "https://rr1---sn-h0jelnez.c.youtube.com/videoplayback?expire=1641080272...",
        "mimeType": "audio/mp4; codecs=\"mp4a.40.2\"",
        "bitrate": 131007,
        "initRange": {
          "start": "0",
          "end": "667"
        },
        "indexRange": {
          "start": "668",
          "end": "999"
        },
        "lastModified": "1620321966927796",
        "contentLength": "3967382",
        "quality": "tiny",
        "projectionType": "RECTANGULAR",
        "averageBitrate": 129547,
        "highReplication": true,
        "audioQuality": "AUDIO_QUALITY_MEDIUM",
        "approxDurationMs": "245000",
        "audioSampleRate": "44100",
        "audioChannels": 2,
        "loudnessDb": -1.3000002
      }
    ]
  },
  "playbackTracking": {
    "videostatsPlaybackUrl": {
      "baseUrl": "https://s.youtube.com/api/stats/playback?cl=491307275&amp;docid=AjXQiKP5kMs&amp;ei=Nl2HY-6MH5WE8gPjnYnoDg&amp;fexp=1714242%2C9405963%2C23804281%2C23858057%2C23880830%2C23880833%2C23882685%2C23918597%2C23934970%2C23946420%2C23966208%2C23983296%2C23998056%2C24001373%2C24002022%2C24002025%2C24004644%2C24007246%2C24034168%2C24036947%2C24077241%2C24080738%2C24120820%2C24135310%2C24135692%2C24140247%2C24161116%2C24162919%2C24164186%2C24169501%2C24175560%2C24181174%2C24187043%2C24187377%2C24187854%2C24191629%2C24197450%2C24199724%2C24200839%2C24209349%2C24211178%2C24217535%2C24219713%2C24224266%2C24241378%2C24248091%2C24248956%2C24255543%2C24255545%2C24262346%2C24263796%2C24265426%2C24267564%2C24268142%2C24279196%2C24280220%2C24283426%2C24283493%2C24287327%2C24288045%2C24290971%2C24292955%2C24293803%2C24299747%2C24390674%2C24391018%2C24391537%2C24391709%2C24392268%2C24392363%2C24392401%2C24401557%2C24402891%2C24403794%2C24406605%2C24407200%2C24407665%2C24407914%2C24408220%2C24411766%2C24413105%2C24413820%2C24414162%2C24415866%2C24416354%2C24420756%2C24421162%2C24425861%2C24428962%2C24590921%2C39322504%2C39322574%2C39322694%2C39322707&amp;ns=yt&amp;plid=AAXusD4TIOMjS5N4&amp;el=detailpage&amp;len=246&amp;of=Jx1iRksbq-rB9N1KSijZLQ&amp;osid=MWU2NzBjYTI%3AAOeUNAagU8UyWDUJIki5raGHy29-60-yTA&amp;uga=29&amp;vm=CAEQABgEOjJBUEV3RWxUNmYzMXNMMC1MYVpCVnRZTmZWMWw1OWVZX2ZOcUtCSkphQ245VFZwOXdTQWJbQVBta0tETEpWNXI1SlNIWEJERXdHeFhXZVllNXBUemt5UHR4WWZEVzFDblFUSmdla3BKX2R0dXk3bzFORWNBZmU5YmpYZnlzb3doUE5UU0FoVGRWa0xIaXJqSWgB",
      "headers": [
        {
          "headerType": "USER_AUTH"
        },
        {
          "headerType": "VISITOR_ID"
        },
        {
          "headerType": "PLUS_PAGE_ID"
        }
      ]
    },
    "videostatsDelayplayUrl": { (as above) },
    "videostatsWatchtimeUrl": { (as above) },
    "ptrackingUrl": { (as above) },
    "qoeUrl": { (as above) },
    "atrUrl": { (as above) },
    "videostatsScheduledFlushWalltimeSeconds": [10, 20, 30],
    "videostatsDefaultFlushIntervalSeconds": 40
  },
  "videoDetails": {
    "videoId": "AjXQiKP5kMs",
    "title": "Sparks",
    "lengthSeconds": "245",
    "channelId": "UCvCk2zFqkCYzpnSgWfx0qOg",
    "isOwnerViewing": false,
    "isCrawlable": false,
    "thumbnail": {
      "thumbnails": []
    },
    "allowRatings": true,
    "viewCount": "12",
    "author": "Thomas Bergersen",
    "isPrivate": true,
    "isUnpluggedCorpus": false,
    "musicVideoType": "MUSIC_VIDEO_TYPE_PRIVATELY_OWNED_TRACK",
    "isLiveContent": false
  },
  "microformat": {
    "microformatDataRenderer": {
      "urlCanonical": "https://music.youtube.com/watch?v=AjXQiKP5kMs",
      "title": "Sparks - YouTube Music",
      "description": "Uploaded to YouTube via YouTube Music Sparks",
      "thumbnail": {
        "thumbnails": [
          {
            "url": "https://i.ytimg.com/vi/AjXQiKP5kMs/hqdefault.jpg",
            "width": 480,
            "height": 360
          }
        ]
      },
      "siteName": "YouTube Music",
      "appName": "YouTube Music",
      "androidPackage": "com.google.android.apps.youtube.music",
      "iosAppStoreId": "1017492454",
      "iosAppArguments": "https://music.youtube.com/watch?v=AjXQiKP5kMs",
      "ogType": "video.other",
      "urlApplinksIos": "vnd.youtube.music://music.youtube.com/watch?v=AjXQiKP5kMs&amp;feature=applinks",
      "urlApplinksAndroid": "vnd.youtube.music://music.youtube.com/watch?v=AjXQiKP5kMs&amp;feature=applinks",
      "urlTwitterIos": "vnd.youtube.music://music.youtube.com/watch?v=AjXQiKP5kMs&amp;feature=twitter-deep-link",
      "urlTwitterAndroid": "vnd.youtube.music://music.youtube.com/watch?v=AjXQiKP5kMs&amp;feature=twitter-deep-link",
      "twitterCardType": "player",
      "twitterSiteHandle": "@YouTubeMusic",
      "schemaDotOrgType": "http://schema.org/VideoObject",
      "noindex": true,
      "unlisted": true,
      "paid": false,
      "familySafe": true,
      "pageOwnerDetails": {
        "name": "Music Library Uploads",
        "externalChannelId": "UCvCk2zFqkCYzpnSgWfx0qOg",
        "youtubeProfileUrl": "http://www.youtube.com/channel/UCvCk2zFqkCYzpnSgWfx0qOg"
      },
      "videoDetails": {
        "externalVideoId": "AjXQiKP5kMs",
        "durationSeconds": "246",
        "durationIso8601": "PT4M6S"
      },
      "linkAlternates": [
        {
          "hrefUrl": "android-app://com.google.android.youtube/http/youtube.com/watch?v=AjXQiKP5kMs"
        },
        {
          "hrefUrl": "ios-app://544007664/http/youtube.com/watch?v=AjXQiKP5kMs"
        },
        {
          "hrefUrl": "https://www.youtube.com/oembed?format=json&amp;url=https%3A%2F%2Fmusic.youtube.com%2Fwatch%3Fv%3DAjXQiKP5kMs",
          "title": "Sparks",
          "alternateType": "application/json+oembed"
        },
        {
          "hrefUrl": "https://www.youtube.com/oembed?format=xml&amp;url=https%3A%2F%2Fmusic.youtube.com%2Fwatch%3Fv%3DAjXQiKP5kMs",
          "title": "Sparks",
          "alternateType": "text/xml+oembed"
        }
      ],
      "viewCount": "12",
      "publishDate": "1969-12-31",
      "category": "Music",
      "uploadDate": "1969-12-31"
    }
  }
}
</code></pre>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">Future&lt;JsonMap&gt; getSong(String videoId, {int? signatureTimestamp}) async {
  const endpoint = &#39;player&#39;;
  signatureTimestamp ??= getDatestamp() - 1;

  final params = &lt;String, dynamic&gt;{
    &#39;playbackContext&#39;: {
      &#39;contentPlaybackContext&#39;: {&#39;signatureTimestamp&#39;: signatureTimestamp},
    },
    &#39;video_id&#39;: videoId,
  };
  final response = await sendRequest(endpoint, params);
  response.keys
      .where(
        (k) =&gt;
            ![
              &#39;videoDetails&#39;,
              &#39;playabilityStatus&#39;,
              &#39;streamingData&#39;,
              &#39;microformat&#39;,
              &#39;playbackTracking&#39;,
            ].contains(k),
      )
      .toList()
      .forEach(response.remove);

  return response;
}</code></pre>
</section>


  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="../../index.html">ytmusicapi_dart</a></li>
    <li><a href="../../mixins_browsing/">browsing</a></li>
    <li><a href="../../mixins_browsing/BrowsingMixin-mixin.html">BrowsingMixin</a></li>
    <li class="self-crumb">getSong method</li>
</ol>

    <h5>BrowsingMixin mixin</h5>
    <div id="dartdoc-sidebar-left-content"></div>
  </div><!--/.sidebar-offcanvas-->
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
</div><!--/.sidebar-offcanvas-->
</main>
<footer>
  <span class="no-break">
    ytmusicapi_dart
      2.1.3
  </span>
  
</footer>


<script src="../../static-assets/highlight.pack.js?v1"></script>
<script src="../../static-assets/docs.dart.js"></script>

</body>
</html>

